<!DOCTYPE html>
<html>
	<head>
		<title>Nymph REST Test</title>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<script src="lib/jquery-1.7.2.min.js"></script>
		<script type="text/javascript">
			(function(){
				var s = document.createElement("script"); s.setAttribute("src", "https://www.promisejs.org/polyfills/promise-5.0.0.min.js");
				(typeof Promise !== "undefined" && typeof Promise.all === "function") || document.getElementsByTagName('head')[0].appendChild(s);
			})();
		</script>
		<script>
			NymphOptions = {
				restURL: 'rest.php'
			};
		</script>
		<script src="src/Nymph.js"></script>
		<script src="src/Entity.js"></script>
		<script src="Employee.js"></script>
		<script>
			$(function(){
				$("button").click(function(){
					eval($("textarea").val());
				});
				$("pre").click(function(){
					$("textarea").val($(this).html());
				})
			});
		</script>
	</head>
	<body>
		<div style="width: 49%; float: left;">
			<textarea rows="20" style="width: 95%;"></textarea>
			<br>Click an AJAX call below and <button>Go</button>
		</div>
		<div style="width: 49%; height: 300px; float: left; overflow: auto;" id="result">result here</div>
		<br style="clear: both;">
		<h4>Get a new UID</h4>
		<pre>Nymph.newUID('employee').then(function(data){
	$("#result").html(data);
}, function(errObj){
	$("#result").html(errObj.textStatus);
});</pre>
		<h4>Get UID value</h4>
		<pre>Nymph.getUID('employee').then(function(data){
	$("#result").html(data);
}, function(errObj){
	$("#result").html(errObj.textStatus);
});</pre>
		<h4>Delete UID</h4>
		<pre>Nymph.deleteUID('employee').then(function(data){
	$("#result").html(data);
}, function(errObj){
	$("#result").html(errObj.textStatus);
});</pre>
		<h4>Create two entities</h4>
		<pre>$.ajax({
	method: 'PUT',
	url: 'rest.php',
	type: 'html',
	data: {'action': 'entities', 'data': '[{"guid":null,"tags":[],"data":{"name":"Jane Doe","current":true,"salary":8000000,"start_date":1410293207,"subordinates":[],"title":"Seniorer Person"},"class":"Employee"},{"guid":null,"tags":["boss","bigcheese"],"data":{"name":"Steve Guy","current":true,"salary":8000000,"start_date":1410293207,"subordinates":[],"title":"Executive Person"},"class":"Employee"}]'},
	success: function(data) {
		$("#result").html(data);
	},
	error: function(status){
		$("#result").html(errObj.textStatus);
	}
});</pre>
		<h4>Create an entity</h4>
		<pre>$.ajax({
	method: 'PUT',
	url: 'rest.php',
	type: 'html',
	data: {'action': 'entity', 'data': '{"guid":null,"tags":[],"data":{"name":"Jane Doe","current":true,"salary":8000000,"start_date":1410293207,"subordinates":[],"title":"Seniorer Person"},"class":"Employee"}'},
	success: function(data) {
		$("#result").html(data);
	},
	error: function(status){
		$("#result").html(errObj.textStatus);
	}
});</pre>
		<h4>Get an entity</h4>
		<pre>Nymph.getEntity({"class":"Employee"}, {"type":"&amp;","strict":["name","Jane Doe"]}).then(function(data){
	$("#result").html(JSON.stringify(data));
}, function(errObj){
	$("#result").html(errObj.textStatus);
});</pre>
		<h4>Get entities</h4>
		<pre>Nymph.getEntities({"class":"Employee","limit":4},{"type":"&amp;","strict":["name","Jane Doe"]}).then(function(data){
	$("#result").html(JSON.stringify(data));
}, function(errObj){
	$("#result").html(errObj.textStatus);
});</pre>
		<h4>Delete an entity</h4>
		<pre>Nymph.getEntity({"class":"Employee"}, {"type":"&amp;","strict":["name","Jane Doe"]}).then(function(data){
	$("#result").html(JSON.stringify(data)+'<br>');
	Nymph.deleteEntity(data).then(function(data){
		$("#result").append(JSON.stringify(data));
	}, function(errObj){
		$("#result").html(errObj.textStatus);
	});
}, function(errObj){
	$("#result").html(errObj.textStatus);
});</pre>
		<h4>Delete entities</h4>
		<pre>Nymph.getEntities({"class":"Employee","limit":2},{"type":"&amp;","strict":["name","Jane Doe"]}).then(function(data){
	$("#result").html(JSON.stringify(data)+'<br>');
	Nymph.deleteEntities(data).then(function(data){
		$("#result").append(JSON.stringify(data));
	}, function(errObj){
		$("#result").html(errObj.textStatus);
	});
}, function(errObj){
	$("#result").html(errObj.textStatus);
});</pre>
	</body>
</html>
